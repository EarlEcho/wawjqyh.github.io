# 网络基础

## ISO/OSI七层模型

* `ISO` 国际标准化组织
* `OSI` 开放系统互联模型

| 层 | 模型      | 协议           | 数据单位 |
|:---|:----------|:---------------|:---------|
| 7  | 应用层    | 应用层协议     | APDU     |
| 6  | 表示层    | 表示层协议     | PPDU     |
| 5  | 会话层    | 会话层协议     | SPDU     |
| 4  | 传输层    | 传输层协议     | TPDU     |
| 3  | 网络层    | 网络层协议     | 报文     |
| 2  | 数据链路层| 数据链路层协议 | 帧       |
| 1  | 物理层    | 物理层协议     | 比特     |

* 应用层：用户接口
* 表示层：数据的表现形式、特定功能的实现如加密
* 会话层：对应用会话的管理、同步
* 传输层：可靠与不可靠的传输、传输前的错误检查、流控
* 网络层：提供逻辑地址、选路
* 数据链路层：成帧、用MAC地址访问媒介、错误检测与修正
* 物理层：设备之间的比特流的传输、物理接口、电气特性等

## TCP/IP协议

TCP/IP协议不是TCP和IP这两个协议的合称，而是指因特网整个TCP/IP协议族

| OSI 7层模型                | TCP/IP 4层模型 |
|:---------------------------|:---------------|
| 应用层<br>表示层<br>会话层 | 应用层         |
| 传输层                     | 传输层         |
| 网络层                     | 网际互联层     |
| 数据链路层<br>物理层       | 网络接口层     |

### 网络接口层

数据链路层是负责接收IP数据包并通过网络发送，或者从网络上接收物理帧，抽出IP数据包，交给IP层。ARP是正向地址解析协议，通过
已知的IP，寻找对应主机的MAC地址。RARP是反向地址解析协议，通过MAC地址确定IP地址。比如无盘工作站还有DHCP服务。

#### 常见的接口层协议有

Ethernet 802.3、Token Ring 802.5、X.25、Frame relay、HDLC、PPP ATM等

### 网络层

负责相邻计算机之间的通信。其功能包括三方面：

* 处理来自传输层的分组发送请求，收到请求后，将分组装入IP数据报，填充报头，选择去往信宿机的路径，然后将数据报发往适当的网络接口
* 处理输入数据报：首先检查其合法性，然后进行寻径--假如该数据报已到达信宿机，则去掉报头，将剩下部分交给适当的传输协议；假如该数据报尚未到达信宿，则转发该数据报
* 处理路径、流控、拥塞等问题

网络层包括：IP(Internet Protocol）协议、ICMP(Internet Control Message Protocol)、控制报文协议、
ARP(Address Resolution Protocol）地址转换协议、RARP(Reverse ARP)反向地址转换协议。

IP是网络层的核心，通过路由选择将下一条IP封装后交给接口层。IP数据报是无连接服务。

ICMP是网络层的补充，可以回送报文。用来检测网络是否通畅。

Ping命令就是发送ICMP的echo包，通过回送的echo relay进行网络测试。